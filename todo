----------------
-- 24/12/2020 --
----------------
[ ] afficher les clients (s'il n'y a pas d'infos, afficher "client N° xxx")
[ ] pouvoir créer un client

[ ] mettre en place des tests pour vérifier que les routes de base fonctionnent (et éviter que des changements futurs dans la BDD ne cassent l'application)

[ ] demander : si 2 commerciaux veulent changer les informations d'un client, on fait comment ?
    Seul option à laquelle je peux penser : on conserve un historique des modifications d'un utilisateur, et on laisse tout le monde modifier (aka stratégie Google Doc)

[ ] pouvoir déposer des fichiers

[ ] #ihm permettre à l'admin de RENAME + INSERT un enum (etat_projet, statut_societe)
    (mime_type c'est automatique, et user_role c'est hard coded, donc on ne le laisse pas changer ça)

[ ] #ihm pouvoir modifier les détails d'un utilisateur (chaque utilisateur doit pouvoir modifier ses propres informations)

----------------
-- 23/12/2020 --
----------------
[x] faire un système de gestion de permissions
    (pour le moment, certaines routes sont accessibles au tout venant)
[x] refactoriser à nouveau la BDD (et donc le code T_T)
    [x] pour stocker les emails comme des clés primaires de type varchar(255) (https://stackoverflow.com/a/8242609)
    [x] pour stocker la colonne 'user_role' dans 'user'
    [x] pour transformer les enum_*(id, desc) en enum_*(desc)
[x] refactoriser index.php / l'emplacement des routes *.php / des fichiers *.html.twig / des fichiers *.sql
[x] créer EditableException pour customiser le __file__:__line__
    (très pratique pour balancer une exception qui me guide au bon endroit si ça plante, aka. gestion des permissions)
[x] créer des données de test (dummy_data.sql)

[x] afficher la liste des commerciaux

----------------
-- 22/12/2020 --
----------------
[x] refactoriser la BDD et le code pour la gestion des emails, pour permettre la création de clients sans email
    user_emails (pk_email_id, email_itself, fk_user_id)
    user_account (..., +fpk_email_id, -fpk_user_id)
[x] créer une vue pour simplifier l'accès aux informations d'un utilisateur
[x] #conception est ce qu'un commercial doit pouvoir voir le contrat de n'importe quel client ?
    => un commercial ne voit que les contrats sur lesquels il a travaillé
[x] #sql init statut_societe : 'autoentrepreneur', 'entreprise', 'vendeur à domicile'
[x] #sql init etat_projet : 'proposition commerciale', 'commande validée par le client',
    'validation commande par le fournisseur', 'installation planifiée', 'instalée'

----------------
-- 17/12/2020 --
----------------
[x] créer un compte admin de base
[x] init enum_user_role (admin, commercial, client, fournisseur)

[x] pouvoir se connecter (verifier login + mdp, si oui, mettre dans $_SESSION['current_user'] : user_role + user_id + prenom + nom)
[x] Afficher une page ('/commerciaux')
[x] pouvoir se déconnnecter (/logout de tifod)

[x] créer une fonction MySQL pour créer un user + user_account (plus précisement pour un commercial)
[x] créer un compte depuis la page admin
[x] envoyer un email à l'email renseigné

[x] créer un token
[x] envoyer token par email pour reset password
[x] route pour process token (/?token=...&action=reset_password)
[x] vérifier le token
[x] connecter l'utilisateur
[x] afficher la bonne page pour modifier le mdp
[x] modifier le mdp en BDD